## 提高QPS

### 1 提高并发数

- 能用多线程用多线程

  估算线程数

  16核，应该开几个线程

  线程数=CPU 可用核数/ (1- 阻塞系数) （IO密集型接近1，计算密集型接近0）

- 增加各种连接数，tomcat、mysql、redis等等

- 服务无状态，便于横向扩展（扩机器）

- 让服务能力对等（service url，打乱顺序）

### 2 减少响应时间

- 异步（最终一致性，不需要及时），流量削峰
- 缓存（减少db读取，减少磁盘IO，读多，写少）
- 数据库优化
- 多的数据，多批次返回
- 减少调用链，减少网络io
- 实时数据使用长连接（但会减少并发数），不要轮询
