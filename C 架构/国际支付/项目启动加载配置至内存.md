![image-20201219215109995](https://yeyangshu-picgo.oss-cn-shanghai.aliyuncs.com/img/image-20201219215109995.png)

AbstractConfig

```java
import java.io.Serializable;
import java.util.Date;

public abstract class AbstractConfig implements Serializable {

    private static final long serialVersionUID = 4923586719573071657L;

    /** 分组 */
    private String group;

    /** 版本信息 */
    private String version;

    /** 创建时间 */
    private Date gmtCreate;

    /** 修改时间 */
    private Date gmtModified;

//    @Override
//    public final String toString(){
//        return ReflectionToStringBuilder.toString(this, ToStringStyle.SHORT_PREFIX_STYLE);
//    }

    public abstract String getKey();
}
```

Code

```java
import org.springframework.stereotype.Component;

@Component
public class Code {

    private CodeConfig codeConfig;

    public String getCode() {
        return codeConfig.getCode();
    }

    public String getMessageTemplate() {
        return codeConfig.getMessageTemplate();
    }

    public String getTransType() {
        return codeConfig.getTransType();
    }

}
```

CodeConfig

```java
import org.springframework.beans.factory.InitializingBean;

import java.io.FileInputStream;
import java.io.ObjectInputStream;

/**
 * 属性配置
 */
public class CodeConfig extends AbstractConfig implements InitializingBean {

    private static final long serialVersionUID = -2533021969725705762L;

    private String code;

    private String messageTemplate;

    private String transType;

    public String getCode() {
        return code;
    }

    public void setCode(String code) {
        this.code = code;
    }

    public String getMessageTemplate() {
        return messageTemplate;
    }

    public void setMessageTemplate(String messageTemplate) {
        this.messageTemplate = messageTemplate;
    }

    public String getTransType() {
        return transType;
    }

    public void setTransType(String transType) {
        this.transType = transType;
    }

    @Override
    public String getKey() {
        return this.code;
    }

    public CodeConfig(String code, String messageTemplate, String transType) {
        this.code = code;
        this.messageTemplate = messageTemplate;
        this.transType = transType;
    }

    @Override
    public String toString() {
        return "CodeConfig{" +
                "code='" + code + '\'' +
                ", messageTemplate='" + messageTemplate + '\'' +
                ", transType='" + transType + '\'' +
                '}';
    }

    @Override
    public void afterPropertiesSet() throws Exception {
        FileInputStream fileInputStream = null;
        ObjectInputStream objectInputStream = null;

        fileInputStream = new FileInputStream("code.txt");
        objectInputStream = new ObjectInputStream(fileInputStream);
        CodeConfig codeConfig = (CodeConfig)objectInputStream.readObject();
        this.code = codeConfig.getCode();
        this.messageTemplate = codeConfig.getMessageTemplate();
        this.transType = codeConfig.getTransType();
        System.out.println(codeConfig.toString());
    }
}
```

1