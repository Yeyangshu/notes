# 安装

下载zookeeper-3.4.10.tar.gz并解压，移动解压后的文件夹至/opt/soft

zookeeper目录结构

![](https://yeyangshu-picgo.oss-cn-shanghai.aliyuncs.com/img/image-20200729223552532.png)

进入conf，复制一份

修改临时文件目录

tmp/zookeeper -> var/zookeeper

```
# The number of milliseconds of each tick
tickTime=2000
# The number of ticks that the initial
# synchronization phase can take
initLimit=10
# The number of ticks that can pass between
# sending a request and getting an acknowledgement
syncLimit=5
# the directory where the snapshot is stored.
# do not use /tmp for storage, /tmp here is just
# example sakes.
// 修改文件夹
dataDir=/var/zookeeper
# the port at which the clients will connect
clientPort=2181
# the maximum number of client connections.
# increase this if you need to handle more clients
#maxClientCnxns=60
#
# Be sure to read the maintenance section of the
# administrator guide before turning on autopurge.
#
# http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance
#
# The number of snapshots to retain in dataDir
#autopurge.snapRetainCount=3
# Purge task interval in hours
# Set to "0" to disable auto purge feature
#autopurge.purgeInterval=1

// 新增配置
server.1=node01:2888:3888
server.2=node02:2888:3888
server.3=node03:2888:3888
server.4=node04:2888:3888

```

新建并进入文件夹/var/zookeeper，创建myid

```
[root@node1 zookeeper]# cat myid 
1
```

> 关闭其他虚拟机防火墙
>
> service iptables stop

复制zookeeper文件夹所有文件至其他虚拟机

```
scp -r ./zookeeper-3.4.10/ root@192.168.163.112:/opt/soft/zookeeper-3.4.10
```

新建文件夹并设置myid

```
mkdir -p /var/zookeeper
echo 2 > /var/zookeeper/myid
cat zookeeper/myid
2
```

设置环境变量

 





