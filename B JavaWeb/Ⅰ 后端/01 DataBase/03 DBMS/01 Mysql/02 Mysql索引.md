# Mysql索引

索引面试题

- 数据库中最常见的慢查询优化方式是什么？
- 为什么加索引能优化慢查询？
- 你知道哪些数据结构可以提高查询速度？
- 这些数据结构都能优化查询速度，Mysql为何选择B+树呢？

## 1 基础知识储备

- 局部性原理
  - 空间局部性：程序和数据都有聚集成群的倾向，在一段时间内，仅使用其中一小部分
  - 时间局部性：或最近访问过的程序代码和数据，很快又被访问的可能性很大
- 磁盘预读（预读的长度一般为页（page）的整数倍）
  - 页是存储器的逻辑块，操作系统往往将主存和磁盘存储区分割为连续的大小相等的块，每个存储块称为一页（在许多操作系统中，也大小通常为4k），主存和磁盘一页为单位交换数据。

## 2 什么是索引

- 索引是帮助Mysql高效获取数据的**数据结构**
- 索引存储在文件系统中
- 索引的文件存储形式与存储引擎有关
- 索引文件的结构
  - hash
  - 二叉树
  - B树
  - B+树

## 3 索引的分类

Mysql索引有五种类型：主键索引、唯一索引、普通索引、全文索引和组合索引

- 主键索引

  主键索引是唯一性索引，但它必须指定为Primary key，每个表只能有一个主键。

- 唯一索引

  索引列的所有值都只能出现一次，即必须唯一，值可以为空。

- 普通索引

  基本的索引类型，值可以为空，没有唯一性限制。（**<font color=red>覆盖索引</font>**）

- 全文索引，MylSAM支持，Innodb在5.6支持

  全文索引的索引类型为FULLTEXT。全文索引可以在varchar、char、text类型上创建

- 组合索引

  多列值组成一个索引，撰文用于组合搜索。（**<font color=red>最左匹配原则</font>**）

## 4 索引机制

待整理。。。

## 5 索引维护

![image-20200711003628332](https://yeyangshu-picgo.oss-cn-shanghai.aliyuncs.com/img/20200711003628.png)

## 6 索引面试难点

- 回表
- 覆盖索引
- 最左前缀
- 索引下推



！！！多看几遍！！！